# osx 에 https 차단 우회 적용하기

## [GreenTunnel](https://github.com/SadeghHayeri/GreenTunnel)


### osx 에 app 형태로 설치

1. [releases](https://github.com/SadeghHayeri/GreenTunnel/releases) 페이지에서 OS 환경에 맞는 프로그램을 설치 후 GreenTunnel 앱 실행
2. 네트워크 환경설정 -> 고급 -> proxy -> 좌측에서 https 보안 웹 프록시 체크 -> 적용

### npm 형태로 설치

1. 터미널에서 아래의 명령어로 설치 및 실행 (단, nodejs 우선 설치)

    ```shell
    $> brew install node
    $> npm i -g green-tunnel
    $> gt --port=8000
    ```

2. 네트워크 환경설정 -> 고급 -> proxy -> 좌측에서 https 보안 웹 프록시 체크 -> 적용

3. 부팅시 자동 시작하도록 적용 serivce 에 등록

  - ~/Library/LaunchAgents/com.Github.GreenTunnel.plist 생성
    ```xml
      <?xml version="1.0" encoding="UTF-8"?>
      <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
      <plist version="1.0">
        <dict>
          <key>KeepAlive</key>
            <true />
          <key>RunAtLoad</key>
            <true/>
          <key>Label</key>
            <string>com.Github.GreenTunnel</string>
          <key>Program</key>
            <string>/usr/local/bin/gt</string>
          <key>ProgramArguments</key>
            <array>
              <string>/usr/local/bin</string>
              <string>--ip=127.0.0.1</string>
              <string>--port=8000</string>
            </array>
          <key>StandardErrorPath</key>
            <string>/usr/local/var/log/GreenTunnel.log</string>
          <key>StandardOutputPath</key>
            <string>/usr/local/var/log/GreenTunnel.log</string>
          <key>Disabled</key>
            <false/>
        </dict>
      </plist>    
    ```

  - 터미널에서 아래와 같이 launchctl 을 통해 서비스 등록 및 실행
    ```shell
    $> launchctl setenv PATH /usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
    $> launchctl load ~/Library/LaunchAgents/com.Github.GreenTunnel.plist
    $> launchctl start com.Github.GreenTunnel
    ```
